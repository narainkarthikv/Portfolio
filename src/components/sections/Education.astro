---
import Section from '../Section.astro'

import { education } from '@cv'
import { certificates } from '@cv'
---

<Section className={Astro.props.className} title='Education'>
  <ul class="space-y-2 py-2">
    {
      education.map(
        ({ institution, startDate, endDate, area, url }) => {
          const startYear = new Date(startDate).getFullYear()
          const endYear =
            endDate != null ? new Date(endDate).getFullYear() : 'Actual'
          const years = `${startYear} - ${endYear}`

          return (
            <li class="rounded border border-skin-muted px-3 py-2 flex flex-col sm:flex-row sm:items-center sm:justify-between bg-skin-card">
              <div class="flex flex-col sm:flex-row sm:items-center gap-1">
                <a
                  target='_blank'
                  class='font-semibold text-skin-base hover:text-skin-hue transition-colors'
                  href={url || null}>
                  {institution}
                </a>
                <span class="hidden sm:inline mx-2 text-skin-muted">|</span>
                <span class="text-sm text-skin-muted">{area}</span>
              </div>
              <span class="text-xs text-skin-muted mt-1 sm:mt-0">{years}</span>
            </li>
          )
        }
      )
    }
  </ul>

  {
    certificates.length > 0 && (
      <>
        <h4 data-ccursor="lift" class="mt-4 mb-2 text-base font-semibold text-skin-base">Certificates</h4>
        <ul class="space-y-2 py-2">
          {certificates.map(({ name, date, issuer, url }) => (
            <li class="rounded border border-skin-muted px-3 py-2 flex flex-col sm:flex-row sm:items-center sm:justify-between bg-skin-card">
              <div class="flex flex-col sm:flex-row sm:items-center gap-1">
                <span class="font-medium">{name}</span>
                <span class="hidden sm:inline mx-2 text-skin-muted">|</span>
                <span class="text-sm text-skin-muted">{issuer}</span>
              </div>
              <div class="flex items-center gap-2 mt-1 sm:mt-0">
                <span class="text-xs text-skin-muted">{date}</span>
                {url && <a href={url} class="text-xs text-skin-hue underline hover:no-underline ml-2" target="_blank">View</a>}
              </div>
            </li>
          ))}
        </ul>
      </>
    )
  }
</Section>
